# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json
version: 3
shell_integration: true
final_space: true

palette:
  bg: transparent
  blue: "#6295fd"
  dfg: "#A1A1A1"
  fg: "#43CCEA"
  green: "#00ff0d"
  lavender: "#B7BDF8"
  orange: "#FF9248"
  pink: "#F5BDE6"
  red: "#FF4500"
  teal: "#00897b"
  wfg: "#F0F0F0"
  white: "#FFFFFF"
  yellow: "#FFFB38"

var:
  WinOS: windows

blocks:
  
  - type: prompt
    alignment: left
    segments:
      
      - type: session
        style: plain
        foreground_templates:
          - "{{if .Root}}p:red{{else}}p:dfg{{end}}"
        background: p:bg
        template: "{{if and (ne .OS .Var.WinOS) (not .WSL)}} {{.HostName}}:{{.UserName}} >{{else if .WSL}} WSL:{{.UserName}} >{{else if .Root}} * >{{end}} "
      
      - type: path
        style: plain
        foreground: p:fg
        background: p:bg
        template: "{{ .Path }} "
        properties:
          folder_icon: "..."
          folder_separator_icon: <p:dfg>/</>
          home_icon: "~"
          max_depth: 3.0
          style: agnoster_short
      
      - type: git
        style: plain
        foreground: p:green
        foreground_templates:
          - "{{if or (.Working.Changed) (.Staging.Changed)}}p:orange{{end}}"
          - "{{if and (gt .Ahead 0) (gt .Behind 0)}}p:orange{{end}}"
          - "{{if gt .Ahead 0}}p:yellow{{end}}"
          - "{{if gt .Behind 0}}p:red{{end}}"
        background: p:bg
        template: "<p:dfg>> </>git {{.HEAD}}{{.BranchStatus}}{{if .Working.Changed}} [c] {{.Working.String}}{{end}}{{ if and (.Working.Changed) (.Staging.Changed) }} |{{end}}{{ if .Staging.Changed }} [s] {{ .Staging.String }}{{end}}{{ if gt .StashCount 0 }} [st] {{ .StashCount }}{{end}} "
        properties:
          branch_ahead_icon: "+"
          branch_behind_icon: "-"
          branch_gone_icon: "*"
          branch_icon: "@"
          branch_identical_icon: "="
          branch_max_length: 0.0
          cherry_pick_icon: ""
          commit_icon: ""
          fetch_stash_count: true
          fetch_status: true
          fetch_upstream_icon: false
          merge_icon: ""
          rebase_icon: ""
          revert_icon: ""
          tag_icon: ""
      
      - type: dotnet
        style: plain
        foreground: p:blue
        background: p:bg
        template: "<p:dfg>> </>.net {{if .Unsupported}}n/a{{else}}{{.Full}}{{end}} "
        properties:
          home_enabled: false

      - type: node
        style: plain
        properties:
          cache_duration: none
          fetch_version: true
        template: "<p:dfg>> </>node {{.Full}} "
        foreground: p:dfg
        background: p:bg
      
      - type: python
        style: plain
        foreground: p:orange
        background: p:bg
        template: "<p:dfg>> </>py {{if .Error}}{{.Error}}{{else}}{{if .Venv}}{{.Venv}}{{end}}{{.Full}}{{end}} "
        properties:
          display_mode: files
          fetch_virtual_env: true
      
      - type: go
        style: plain
        properties:
          cache_duration: none
        template: "<p:dfg>> </>go {{if .Error}}{{.Error}}{{else}}{{.Full}}{{end}} "
        foreground: p:blue
        background: p:bg

      - type: rust
        style: plain
        properties:
          cache_duration: none
          display_mode: files
          fetch_virtual_env: true
        template: "<p:dfg>> </>rust {{if .Error}}{{.Error}}{{else}}{{.Full}}{{end}} "
        foreground: "#99908A"
        background: p:bg
      
      - type: os
        style: plain
        foreground: p:wfg
        background: p:bg
        template: "<p:dfg>> </>{{.Icon}} "
        properties:
          alpine: alx
          arch: arx
          debian: deb
          elementary: ele
          fedora: fed
          gentoo: gen
          linux: nix
          macos: mac
          manjaro: maj
          mint: min
          opensuse: sus
          raspbian: rpi
          ubuntu: ubn
          windows: win
          wsl: wsl

      - type: time
        style: plain
        template: "<p:dfg>> {{ .CurrentDate | date .Format }}</> "
        foreground: p:dfg
        background: p:bg
        properties:
          time_format: 15:04:05
      
      - type: shell
        style: plain
        foreground_templates:
          - "{{if gt .Code 0}}p:red{{else}}p:green{{end}}"
        background: p:bg
        template: "<p:dfg>> {{.Name}} </>{{.Code}} "
        properties:
          always_enabled: true
          mapped_shell_names:
            pwsh: PS

      - type: executiontime
        style: plain
        foreground: p:fg
        background: p:bg
        template: "<p:dfg>> </>{{.FormattedMs}} "
        properties:
          style: austin
          always_enabled: true

  - type: prompt
    alignment: left
    newline: true
    segments:
    
      - type: text
        style: plain
        properties:
          cache_duration: none
        template: ">"
        foreground: p:white
